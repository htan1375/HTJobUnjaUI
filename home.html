<!DOCTYPE html>
<html lang="fa">
<head>
    <link rel="stylesheet" type="text/css" href="css/styles.css"/>
    <link rel="stylesheet" type="text/css" href="fonts/iransans/fonts.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.2/css/all.css">
    <script src="https://unpkg.com/react@15/dist/react.min.js"></script>
    <script src="https://unpkg.com/react-dom@15/dist/react-dom.min.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!--<script src="js/home.js" type="text/jsx"></script>-->
    <meta charset="UTF-8">
    <title>جاب‌اونجا</title>
</head>
<body>
    <header class="header">
        <span class="header-span">
            <a class="header-logo" href="#">
                <img src="logo/logo%20v1.png" alt="JobUnja" width="auto" height="60px"/>
            </a>
            <div class="header-left">
                <a class="header_link" href="#">حساب کاربری</a>
                <a class="header_link" href="#">خروج</a>
            </div>
        </span>
    </header>
    <nav class="mynav nav-home">
        <h1 class="home-title">جاب‌اونجا خوب است !</h1>
        <p class="home-desc">لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم از صنعت چاپ و با استفاده از طراحان گرافیک است. </p>
        <span class="home-search-span">
            <input class="home-search-input" type="text" placeholder="جستجو در جاب‌اونجا">
            <input class="home-search-button" type="button" value="جستجو">
        </span>
    </nav>
    <section class="home-section">
        <ul class="home-main-right" id="users">

        </ul>
        <script type="text/jsx">
            class Users extends React.Component {
                constructor(){
                    super();
                    this.state = {
                        persons: []
                    };
                }
                componentDidMount(){
                    axios.get('http://localhost:2424/user')
                        .then((response) => {
                            console.log(response.data);
                            this.setState({
                                persons:response.data
                            });
                        })
                        .catch(function (error) {
                            console.log(error);
                        })
                        .then(function () {});
                }
                render() {
                    return <div>
                        <li className="home-user-search">
                            <input className="home-user-search-input" type="text" placeholder="جستجوی نام کاربر"/>
                        </li>
                        {
                            this.state.persons.map((person) => {
                                return(
                                    <li className="home-user"><a href={"./profile?id="+person['id']}>
                                        <img className="home-user-img" src={person['profilePictureURL']} alt="profile" width="45px" height="45px"/>
                                        <h3 className="home-user-name">{person['fullName']}</h3>
                                        <p className="home-user-job">{person['jobTitle']}</p>
                                    </a></li>
                                )
                            })
                        }
                    </div>
                }
            }
            ReactDOM.render(
                <Users />,
                document.getElementById("users")
            );
        </script>
        <ul class="home-main-left" id="projects">
        </ul>
        <script type="text/jsx">
            class Projects extends React.Component {
                constructor(){
                    super();
                    this.state = {
                        projs: []
                    };
                }
                componentDidMount(){
                    axios.get('http://localhost:2424/project')
                        .then((response) => {
                            console.log(response.data);
                            this.setState({
                                projs:response.data
                            });
                        })
                        .catch(function (error) {
                            console.log(error);
                        })
                        .then(function () {});
                }
                render() {
                    return(
                        <div>{
                            this.state.projs.map((proj) => {
                                return (
                                    <li className="home-proj"><a href={"./project?id="+proj['id']}>
                                        <img className="home-prj-img" src={proj['imageUrl']} alt="profile" width="160px" height="160px"/>
                                        <h1 className="home-prj-name">{proj['title']}</h1>
                                        <p className="home-prj-timeout">مهلت تمام شده</p>
                                        <p className="home-prj-bio">{proj['description']}</p>
                                        <p className="home-prj-price">بودجه: {""+proj['budget']} تومان</p>
                                        <li className="home-skill-title">مهارت‌ها:</li>
                                        <ul className="home-skill-list">{
                                            proj['skills'].map((skill) => {
                                                return(
                                                    <li className="home-skill">{skill['name']}</li>
                                                )
                                            })
                                        }
                                        </ul>
                                    </a></li>
                                )
                            })
                        }</div>
                    )
                }
            }
            ReactDOM.render(
                <Projects />,
                document.getElementById("projects")
            );
        </script>
    </section>

    <footer class="footer">
        <p>&copy; تمامی حقوق این سایت متعلق به جاب‌اونجا می‌باشد</p>
    </footer>
</body>
</html>